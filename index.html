<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tournoi FC 26 – Gestion</title>
<style>
  :root{
    --bg:#0b1220;
    --card:#0f1a2e;
    --card2:#0c162a;
    --text:#e8eefc;
    --muted:#a9b7d3;
    --line:rgba(255,255,255,.08);
    --accent:#7c5cff;
    --accent2:#2dd4bf;
    --danger:#ff4d6d;
    --shadow: 0 10px 30px rgba(0,0,0,.35);
    --radius:18px;
  }

  *{box-sizing:border-box}
  body{
    margin:0;
    font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
    background:
      radial-gradient(1200px 600px at 20% -10%, rgba(124,92,255,.22), transparent 60%),
      radial-gradient(900px 500px at 90% 0%, rgba(45,212,191,.18), transparent 55%),
      var(--bg);
    color:var(--text);
  }

  .wrap{max-width:1180px;margin:0 auto;padding:24px}

  h1{font-size:26px;margin:0 0 6px;letter-spacing:.2px}
  h2{font-size:16px;margin:0 0 12px;color:var(--muted);font-weight:600}
  p{margin:0}
  .muted{color:var(--muted);font-size:13px;line-height:1.4}
  .danger{color:var(--danger);font-weight:700}

  /* Top header */
  .top{
    display:flex;align-items:flex-start;justify-content:space-between;gap:16px;
    padding:18px 18px 14px;border:1px solid var(--line);
    background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    border-radius:var(--radius); box-shadow:var(--shadow);
    margin-bottom:18px;
  }
  .top .pill{
    display:inline-flex;align-items:center;gap:8px;
    padding:8px 10px;border-radius:999px;
    border:1px solid var(--line);
    background:rgba(255,255,255,.03);
    color:var(--muted);font-size:12px;
    white-space:nowrap;
  }
  .dot{width:8px;height:8px;border-radius:50%;background:var(--accent2);display:inline-block}

  /* Layout */
  .grid{
    display:grid;
    grid-template-columns: 1.15fr 1fr;
    gap:16px;
  }
  @media (max-width: 980px){
    .grid{grid-template-columns:1fr}
  }

  /* Cards */
  .card{
    border:1px solid var(--line);
    background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    padding:16px;
  }
  .card.soft{background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));}
  .cardHeader{
    display:flex;align-items:center;justify-content:space-between;gap:12px;
    margin-bottom:10px;
  }

  /* Inputs */
  textarea{
    width:100%;
    height:160px;
    resize:vertical;
    border-radius:14px;
    border:1px solid var(--line);
    background:rgba(0,0,0,.22);
    color:var(--text);
    padding:12px;
    outline:none;
  }
  textarea:focus{border-color:rgba(124,92,255,.55); box-shadow:0 0 0 3px rgba(124,92,255,.18)}
  input{
    border-radius:12px;
    border:1px solid var(--line);
    background:rgba(0,0,0,.22);
    color:var(--text);
    padding:10px 10px;
    outline:none;
  }
  input:focus{border-color:rgba(45,212,191,.55); box-shadow:0 0 0 3px rgba(45,212,191,.16)}
  input::placeholder, textarea::placeholder{color:rgba(169,183,211,.65)}

  /* Buttons */
  .btnRow{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
  button{
    border:1px solid var(--line);
    background:rgba(255,255,255,.04);
    color:var(--text);
    padding:10px 12px;
    border-radius:12px;
    cursor:pointer;
    font-weight:650;
    letter-spacing:.2px;
    transition: transform .06s ease, background .15s ease, border-color .15s ease;
  }
  button:hover{background:rgba(255,255,255,.07)}
  button:active{transform:translateY(1px)}
  button.primary{
    background:linear-gradient(135deg, rgba(124,92,255,.95), rgba(124,92,255,.65));
    border-color:rgba(124,92,255,.55);
  }
  button.primary:hover{background:linear-gradient(135deg, rgba(124,92,255,1), rgba(124,92,255,.72))}
  button.teal{
    background:linear-gradient(135deg, rgba(45,212,191,.9), rgba(45,212,191,.55));
    border-color:rgba(45,212,191,.55);
    color:#07121f;
  }
  button.teal:hover{background:linear-gradient(135deg, rgba(45,212,191,1), rgba(45,212,191,.65))}
  button.ghost{background:rgba(255,255,255,.03)}

  /* Match list */
  #matches > div{
    border:1px solid var(--line) !important;
    background:rgba(0,0,0,.18);
    border-radius:14px !important;
    padding:12px !important;
  }
  #matches strong{font-size:13px}
  #matches span{color:var(--muted)}
  #matches input{width:72px !important}

  /* Table */
  table{width:100%;border-collapse:separate;border-spacing:0 8px}
  thead th{
    font-size:12px;
    color:var(--muted);
    font-weight:700;
    text-transform:uppercase;
    letter-spacing:.08em;
    padding:10px 10px;
  }
  tbody tr{
    background:rgba(0,0,0,.18);
    border:1px solid var(--line);
  }
  tbody td{
    padding:12px 10px;
    border-top:1px solid var(--line);
    border-bottom:1px solid var(--line);
  }
  tbody tr td:first-child{
    border-left:1px solid var(--line);
    border-top-left-radius:14px;
    border-bottom-left-radius:14px;
    color:var(--muted);
    width:40px;
  }
  tbody tr td:last-child{
    border-right:1px solid var(--line);
    border-top-right-radius:14px;
    border-bottom-right-radius:14px;
  }

  /* Small helpers */
  .spacer{height:14px}
  .metaLine{display:flex;gap:12px;flex-wrap:wrap;margin-top:10px}
  .badge{
    display:inline-flex;align-items:center;gap:8px;
    padding:8px 10px;border-radius:999px;
    border:1px solid var(--line);
    background:rgba(0,0,0,.16);
    color:var(--muted);
    font-size:12px;
  }
</style>

</head>
<body>
<div class="top">
  <div>
    <h1>Tournoi FC 26 – PS5 – Ultimate Team</h1>
    <p class="muted">Coller 32 pseudos, tirage au sort, saisir les scores, classement automatique.</p>
    <div class="metaLine">
      <span class="badge"><span class="dot"></span> Live ready</span>
      <span class="badge">32 joueurs max</span>
      <span class="badge">Déco = défaite</span>
      <span class="badge">Micro OFF</span>
    </div>
  </div>
  <div class="pill">GitHub Pages</div>
</div>


<div class="grid">
<div class="card">
      <h2>1) Joueurs (32 max)</h2>
      <textarea id="players" placeholder="Un pseudo par ligne (32 max)"></textarea>
      <div class="btnRow">
<button id="btnLoadExample" class="ghost">Charger exemple</button>
<button id="btnShuffle" class="primary">Tirage au sort</button>
<button id="btnMakeMatches" class="teal">Créer matchs (1er tour)</button>

    
      </div>
      <p id="count" class="muted"></p>
      <p id="warn" class="danger"></p>
    </div>

    <div class="card">
      <h2>2) Matchs – 1er tour</h2>
      <div id="matches"></div>
      <button id="btnRecalc" class="ghost">Recalculer classement</button>

      <p class="muted">Points: victoire 3, nul 1, défaite 0 (modifiable dans le code).</p>
    </div>
  </div>

  <div class="card" style="margin-top:16px">
    <h2>3) Classement (live)</h2>
    <table>
      <thead>
        <tr>
          <th>#</th><th>Joueur</th><th>J</th><th>V</th><th>N</th><th>D</th><th>BP</th><th>BC</th><th>Diff</th><th>Pts</th>
        </tr>
      </thead>
      <tbody id="tableBody"></tbody>
    </table>
  </div>

<script>
  const $ = (id) => document.getElementById(id);

  function parsePlayers() {
    const lines = $("players").value.split(/\r?\n/).map(s => s.trim()).filter(Boolean);
    const uniq = [];
    const seen = new Set();
    for (const p of lines) {
      const key = p.toLowerCase();
      if (!seen.has(key)) { seen.add(key); uniq.push(p); }
    }
    $("count").textContent = `${uniq.length} joueur(s) unique(s).`;
    $("warn").textContent = uniq.length > 32 ? "Tu as plus de 32 joueurs : garde seulement 32." : "";
    return uniq.slice(0, 32);
  }

  function shuffle(arr) {
    const a = [...arr];
    for (let i = a.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [a[i], a[j]] = [a[j], a[i]];
    }
    return a;
  }

  function makeMatches(players) {
    const pairs = [];
    for (let i = 0; i < players.length; i += 2) {
      const a = players[i];
      const b = players[i+1] ?? "BYE";
      pairs.push({a, b, sa: "", sb: ""});
    }
    return pairs;
  }

  let state = {
    players: [],
    shuffled: [],
    matches: []
  };

  function renderMatches() {
    const root = $("matches");
    root.innerHTML = "";
    state.matches.forEach((m, idx) => {
      const wrap = document.createElement("div");
      wrap.style.border = "1px solid #eee";
      wrap.style.borderRadius = "10px";
      wrap.style.padding = "10px";
      wrap.style.marginBottom = "10px";

      wrap.innerHTML = `
        <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap">
          <strong>Match ${idx+1}</strong>
          <span>${escapeHtml(m.a)} vs ${escapeHtml(m.b)}</span>
          <span style="margin-left:auto" class="muted">Score :</span>
          <input inputmode="numeric" pattern="[0-9]*" style="width:60px" placeholder="A" value="${m.sa}">
          <span>-</span>
          <input inputmode="numeric" pattern="[0-9]*" style="width:60px" placeholder="B" value="${m.sb}">
        </div>
      `;

      const inputs = wrap.querySelectorAll("input");
      inputs[0].addEventListener("input", e => { state.matches[idx].sa = e.target.value; });
      inputs[1].addEventListener("input", e => { state.matches[idx].sb = e.target.value; });

      root.appendChild(wrap);
    });
  }

  function escapeHtml(s){
    return s.replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
  }

  function computeTable() {
    const players = state.shuffled.length ? state.shuffled : state.players;
    const stats = new Map(players.map(p => [p, {p, j:0,v:0,n:0,d:0,bp:0,bc:0,pts:0}]));

    function addResult(a,b,ga,gb) {
      if (!stats.has(a) || !stats.has(b)) return;
      const A = stats.get(a), B = stats.get(b);
      A.j++; B.j++;
      A.bp += ga; A.bc += gb;
      B.bp += gb; B.bc += ga;

      if (ga > gb) { A.v++; B.d++; A.pts += 3; }
      else if (ga < gb) { B.v++; A.d++; B.pts += 3; }
      else { A.n++; B.n++; A.pts += 1; B.pts += 1; }
    }

    for (const m of state.matches) {
      if (m.b === "BYE") continue;
      const sa = Number(m.sa), sb = Number(m.sb);
      if (Number.isFinite(sa) && Number.isFinite(sb) && m.sa !== "" && m.sb !== "") {
        addResult(m.a, m.b, sa, sb);
      }
    }

    const rows = Array.from(stats.values()).map(r => ({
      ...r,
      diff: r.bp - r.bc
    })).sort((x,y) =>
      (y.pts - x.pts) || (y.diff - x.diff) || (y.bp - x.bp) || x.p.localeCompare(y.p, "fr")
    );

    const body = $("tableBody");
    body.innerHTML = "";
    rows.forEach((r, i) => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${i+1}</td>
        <td>${escapeHtml(r.p)}</td>
        <td>${r.j}</td>
        <td>${r.v}</td>
        <td>${r.n}</td>
        <td>${r.d}</td>
        <td>${r.bp}</td>
        <td>${r.bc}</td>
        <td>${r.diff}</td>
        <td><strong>${r.pts}</strong></td>
      `;
      body.appendChild(tr);
    });
  }

  $("btnLoadExample").addEventListener("click", () => {
    $("players").value = Array.from({length: 32}, (_,i)=>`Joueur${i+1}`).join("\n");
    state.players = parsePlayers();
    state.shuffled = [];
    state.matches = [];
    $("matches").innerHTML = "";
    computeTable();
  });

  $("btnShuffle").addEventListener("click", () => {
    state.players = parsePlayers();
    state.shuffled = shuffle(state.players);
    $("players").value = state.shuffled.join("\n");
    state.matches = [];
    $("matches").innerHTML = "";
    computeTable();
  });

  $("btnMakeMatches").addEventListener("click", () => {
    state.players = parsePlayers();
    const use = state.shuffled.length ? state.shuffled : state.players;
    if (use.length < 2) return;
    state.matches = makeMatches(use);
    renderMatches();
    computeTable();
  });

  $("btnRecalc").addEventListener("click", computeTable);

  // init
  state.players = parsePlayers();
  computeTable();
</script>
  </div>
</body>
  <div class="wrap">

</html>
